%!Mode:: "TeX:System

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                                                                           %
%          LaTeX File for Doctor (Master) Thesis of ECNU                    %
%            华东师范大学博士（硕士）论文模板 ____lizb                      %
%                                                                           %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%




\documentclass[12pt,openany,a4paper,fancyhdr,twoside]{ctexbook}

%draft 选项可以使插入的图形只显示外框，以加快预览速度。
%\documentclass[11pt,a4paper,openany,draft]{book}
\usepackage{amsmath}
\usepackage{amssymb}               % AMSLaTeX宏包 用来排出更加漂亮的公式
%\usepackage[CJKbookmarks]{hyperref}
\usepackage{url}
\usepackage[hidelinks]{hyperref}
\usepackage{shortvrb,indentfirst,ulem,makeidx}
\usepackage{fancyhdr}
\usepackage{graphicx}

\usepackage{rotating}


\usepackage{indentfirst,latexsym,colortbl,subfigure,clrscode}

%\usepackage[ruled,vlined,linesnumbered,]{algorithm2e}

\usepackage[linesnumbered,ruled,vlined,resetcount,algochapter]{algorithm2e}%[ruled,vlined]{
\usepackage{algorithmicx}
\usepackage{listings}
\usepackage{algcompatible}
\usepackage{algpseudocode}


\renewcommand*{\algorithmcfname}{算法}

\newcommand{\clearPaperPage}{\clearpage}
%$\renewcommand{\clearPaperPage}{\cleardoublepage}




\SetKwInput{KwIn}{\textbf{输入}}
\SetKwInput{KwOut}{\textbf{输出}}
\SetKwInput{KwReturn}{\textbf{return}}


\usepackage{bibspacing}

\setlength{\bibitemsep}{2\baselineskip plus .05\baselineskip minus .05\baselineskip}


\usepackage{bm}                     % 处理数学公式中的黑斜体的宏包
\usepackage{amssymb}                % AMSLaTeX宏包 用来排出更加漂亮的公式
\usepackage{mathrsfs}
\usepackage[subnum]{cases}
%\usepackage[numbers,sort&compress]{natbib}
\usepackage[super,square,comma,sort&compress]{natbib}
\usepackage{hypernat}
\usepackage{geometry}
\usepackage{times}
\usepackage{fontspec}
%\usepackage{libertine}
\usepackage{libertineotf}
\usepackage{caption}
\usepackage{titletoc}
\usepackage{mathtools}

%\usepackage{chngcntr}
\counterwithout{footnote}{chapter}



%\usepackage{cite}
\usepackage{longtable,booktabs}
\usepackage{multirow}
\usepackage{subfigure}
\usepackage[subfigure]{tocloft}

\usepackage{float}
\usepackage{balance}
\usepackage {paralist}
\usepackage{bbding}
\usepackage{pgffor}

\usepackage{threeparttable}


%\usepackage{biblatex}
\makeindex
\pagestyle{fancy}

\newcommand{\eat}[1]{}

\renewcommand{\headrulewidth}{0.4pt}
\fancyfoot[CO,CE]{\thepage}

\renewcommand{\algorithmicrequire}{\textbf{Input:}}
\renewcommand{\algorithmicensure}{\textbf{Output:}}

\newtheorem{Def}{定义}


\newcommand{\yihao}{\fontsize{26pt}{36pt}\selectfont}           % 一号, 1.4 倍行距
\newcommand{\erhao}{\fontsize{22pt}{28pt}\selectfont}          % 二号, 1.25 倍行距
\newcommand{\xiaoer}{\fontsize{18pt}{18pt}\selectfont}          % 小二, 单倍行距
\newcommand{\sanhao}{\fontsize{16pt}{24pt}\selectfont}        % 三号, 1.5 倍行距
\newcommand{\xiaosan}{\fontsize{15pt}{22pt}\selectfont}        % 小三, 1.5 倍行距
\newcommand{\sihao}{\fontsize{14pt}{21pt}\selectfont}            % 四号, 1.5 倍行距
\newcommand{\banxiaosi}{\fontsize{13pt}{19.5pt}\selectfont}    % 半小四, 1.5 倍行距
\newcommand{\xiaosi}{\fontsize{12pt}{18pt}\selectfont}            % 小四, 1.5 倍行距
\newcommand{\dawuhao}{\fontsize{11pt}{11pt}\selectfont}       % 大五号, 单倍行距
\newcommand{\wuhao}{\fontsize{10.5pt}{15.75pt}\selectfont}    % 五号, 单倍行距

\newcommand{\tablewuhao}{\fontsize{10.5pt}{12.5pt}\selectfont}    % 五号, 单倍行距

\newcommand{\equwuhao}{\fontsize{11.5pt}{15pt}\selectfont}

\renewcommand*{\bibfont}{\normalfont\normalsize\linespread{1}\selectfont}
\setlength{\bibitemsep}{\baselineskip}



%============================ 可以自定义文字块 ================================%


%交叉引用格式
\renewcommand\figureautorefname{图}
\renewcommand\tableautorefname{表}
\renewcommand\equationautorefname{式子}
\renewcommand{\algorithmautorefname}{算法}





\renewcommand{\contentsname}{\hfill\bfseries\Large 目录\hfill}
\renewcommand{\cftaftertoctitle}{\hfill}

\renewcommand{\listtablename}{\hfill\bfseries\Large 表~~~~格\hfill}
\renewcommand{\listfigurename}{\hfill\bfseries\Large 插~~~~图\hfill}


\renewcommand{\listalgorithmcfname}{\centering\bfseries\Large 算~~~~法}
\newcommand*{\fullref}[1]{\textbf{\hyperref[{#1}]{第\ref*{#1}章~}}}


%=============================段前段后定义=============================%
\def  \cftbeforetitleskip {35pt}
\def \cftaftertitleskip {25pt}
%% 目录部分
\setlength{\cftbeforetoctitleskip}{\cftbeforetitleskip}
\setlength{\cftaftertoctitleskip}{\cftaftertitleskip}

%% 图目录

\setlength{\cftbeforeloftitleskip}{\cftbeforetitleskip}
\setlength{\cftafterloftitleskip}{\cftaftertitleskip}

%% 表目录
\setlength{\cftbeforelottitleskip}{\cftbeforetitleskip}
\setlength{\cftafterlottitleskip}{\cftaftertitleskip}
%% 算法目录
%\setlength{\cftbeforeloatitleskip}{30pt}
%\setlength{\cftafterloatitleskip}{20pt}




\CTEXsetup[format={\zihao{3}\heiti\centering}]{chapter}
\CTEXsetup[format={\raggedright\zihao{4}\heiti}]{section}
\CTEXsetup[format={\zihao{-4}\heiti}]{subsection}

\CTEXsetup[beforeskip=13pt]{chapter}
\CTEXsetup[afterskip=16.5 pt]{chapter}





\renewcommand{\baselinestretch}{1.5}

\setlength{\baselineskip}{25pt}  %%正文设为25磅行间距


%\CTEXsetup[beforeskip=\cftbeforetitleskip]{chapter}
%\CTEXsetup[afterskip=\cftaftertitleskip]{chapter}





%===============================概念定义===============================%



\newcommand{\citeline}[1]{[\citenum{ #1 }]}



\newcommand{\important}[1]{\CJKunderdot{\textbf{#1}}}

\newcommand{\TheisName}[0]{面向工业界仿冒应用的大规模实证研究}
\newcommand{\ecg}{拓展函数调用图} % 袁宇杰的全局变量。最后可删。
\newcommand{\TheisNameEn}[0]{A Large-Scale Empirical Study on Industrial Fake Apps}

\newcommand{\code}[1]{\textit{ #1 }}
\newcommand{\codeInEqu}[1]{ {  \textit{\kaishu \textbf{#1 }}}}

%\renewcommand{\code}[1]{{ \lstinline{#1}}}

\def\yearOfGrduation{2020} % 毕业年份
\def\monthOfGraduationNum{5} % 毕业月份
\def\monthOfGraduationEng{May} % 毕业月份 (英文)
\def\articleCategory{华东师范大学硕士学位论文} % 论文类型

\def\schoolNameChn{计算机科学与技术学院}
\def\schoolNameEng{School of Computer Science and Technology}


\newcommand{\anonymous}[1]{\phantom{ #1 }} % 匿名开关
\ifdefined \anonymous
  \def\stuID{***********}
  \def\cmajor{*****}
  \def\cfield{*********}
  \def\cadvisor{***~**}
  \def\cname{***}

  \def\emajor{*****}
  \def\efield{*****}
  \def\eadvisor{***}
  \def\ename{***}
\else
  \def\stuID{51174506026}
  \def\cmajor{计算机科学与技术}
  \def\cfield{软件方法与程序语言}
  \def\cadvisor{贺樑~教授}
  \def\cname{唐~崇~斌}

  \def\emajor{\small{Computer Science and Technology}}
  \def\efield{\small{Software Method and Programming Language}}
  \def\eadvisor{\small{Prof.~Liang~He}}
  \def\ename{\small{Chongbin~Tang}}
\fi

\newcommand{\point}[1]{\subsubsection{\textbf{$\S$  #1 }}}
% \renewcommand{\point}[1]{\noindent{\textbf{$\S$  #1 }}}


\newcommand{\Line}[1]{ \textit{ Line .#1}}

\newcommand{\todo}[1]{\textcolor[rgb]{1,0,0}{\textbf{ #1 }}}
\newcommand{\question}[1]{\textcolor[rgb]{1,0,0}{\textbf{ #1 }?}}

\newcommand{\invoke}[2]{  $ (  #1 \to   #2)  $ }
\newcommand{\trigger}[2]{  $ (  #1 \hookrightarrow   #2)  $ }


\newcommand{\methodObjectRel}[3]{  $ (  #1 \stackrel{#2}{\longrightarrow}   #3)  $ }

\newcommand{\algrule}[1][.2pt]{\par\vskip.5\baselineskip\hrule height #1\par\vskip.5\baselineskip}



%%% ----------------------------------------------------------------------



%============================= 版芯控制 ================================%
\setlength{\oddsidemargin}{0.57cm}
\setlength{\evensidemargin}{\oddsidemargin}
\voffset-6mm \textwidth=150mm \textheight=230mm \headwidth=150mm
%\rightmargin=35mm
%                                                                       %


%============================= 页面设置 ================================%
%-------------------- 定义页眉和页脚 使用fancyhdr 宏包 -----------------%
% 定义页眉与正文间双隔线
\newcommand{\makeheadrule}{%
\makebox[0pt][l]{\rule[.7\baselineskip]{\headwidth}{0.4pt}}%
\rule[0.85\baselineskip]{\headwidth}{0.4pt} \vskip-.8\baselineskip}
\makeatletter
\renewcommand{\headrule}{%
{\if@fancyplain\let\headrulewidth\plainheadrulewidth\fi
\makeheadrule}} \makeatother

\newcommand{\adots}{\mathinner{\mkern 2mu%
\raisebox{0.1em}{.}\mkern 2mu\raisebox{0.4em}{.}%
\mkern2mu\raisebox{0.7em}{.}\mkern 1mu}}

\setmainfont{Times New Roman}
\dottedcontents{chapter}[1.5cm]{\xiaosi\heiti}{3.8em}{9.5pt}
\lhead{\articleCategory}

\dottedcontents{section}[1.5cm]{\xiaosi\heiti}{2.8em}{9.5pt}
\lhead{\articleCategory}

% \setlength{\parindent}{2em}
% %默认的弹性间距会导致文中某些排版flush的时候，出现大量空白。
% \setlength{\parskip}{0.5em} %指定固定段后间距，默认为弹性间距。
% \setlength{\intextsep}{10pt} %固定浮浮动体前后间距。

%=============================== 代码格式定义 ================================%


%% 辅助功能显示页边界
% \usepackage{showframe} % just for the example

\usepackage{etoolbox}



\input{settings-lst}




%=============================== 正文部分 ================================%

\begin{document}
\input{A1-COVER-1.tex}
\clearPaperPage

\input{A2-COVER-E.tex}
\clearPaperPage

\input{A3-COPYRIGHT.tex}
\clearPaperPage

\input{A4-MEMBERLIST.tex}
\clearPaperPage

\pagenumbering{roman}
\pagestyle{plain}

\input{B1-ABSTRACT.tex}
\clearPaperPage

\input{B2-ABSTRACT-E.tex}
\clearPaperPage

%\clearpage{\pagestyle{plain}\clearPaperPage}
%\textcolor[rgb]{1,1,1}{文本}

\input{B2-TOC.tex}
\clearPaperPage

\input{B3-Figure.tex}
\clearPaperPage

\input{B4-Table.tex}
\clearPaperPage
%\input{B5-Algorithms.tex}
%\clearPaperPage

\pagenumbering{arabic}
\pagestyle{fancy}
\fancyhead[LE,RO]{\small{\articleCategory}}
\fancyhead[RE,LO]{ \small\leftmark}

% 正文
% 在章首页添加页眉

\fancypagestyle{plain}{%
\fancyhead[LE,RO]{\small{\articleCategory}}
\fancyhead[RE,LO]{ \small\leftmark}
}

% \banxiaosi
\xiaosi

\clearPaperPage


\input{chapter-intro.tex}
\clearPaperPage

\input{chapter-background.tex}
\clearPaperPage

\input{chapter-dataCollection.tex}
\clearPaperPage

\input{chapter-discoveries.tex}
\clearPaperPage

\input{chapter-case.tex}
\clearPaperPage

\input{chapter-feedback.tex}
\clearPaperPage

\input{chapter-future.tex}
\clearPaperPage

% 参考文献
\addcontentsline{toc}{chapter}{\small{参考文献}}
\bibliographystyle{GBT7714-2005}
\bibliography{bib/REFERENCE}
\clearPaperPage

% 致谢
\ifx\anonymous\undefined
	\fancypagestyle{plain}{%
		\fancyhead[LE,RO]{\small{\articleCategory}}
		\fancyhead[RE,LO]{\small{致  谢}}
	}
	\input{D2-ACKNOWLEDGEMENT.tex}
	\clearPaperPage
\fi

% 攻读学位期间发表过的论文
\input{D3-MYACHIEVEMENTS.tex}

\end{document}
