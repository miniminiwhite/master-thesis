%!Mode:: "TeX:System

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                                                                           %
%          LaTeX File for Doctor (Master) Thesis of ECNU                    %
%            华东师范大学博士（硕士）论文模板 ____lizb                           %
%                                                                           %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%




\documentclass[12pt,openany,a4paper,fancyhdr,twoside]{ctexbook}

%draft 选项可以使插入的图形只显示外框，以加快预览速度。
\usepackage{amsmath}
\usepackage{amssymb}               % AMSLaTeX宏包 用来排出更加漂亮的公式

\usepackage[hyphens]{url}
\urlstyle{same}
\usepackage[hidelinks,breaklinks]{hyperref}

\usepackage{shortvrb,indentfirst,ulem,makeidx}
\usepackage{fancyhdr}
\usepackage{graphicx}

\usepackage{rotating}

\usepackage{indentfirst,latexsym,colortbl,clrscode}

\usepackage[linesnumbered,ruled,vlined,resetcount,algochapter]{algorithm2e}%[ruled,vlined]{
\usepackage{algorithmicx}
\usepackage{listings}
\usepackage{algcompatible}
\usepackage{algpseudocode}


\renewcommand*{\algorithmcfname}{算法}

\newcommand{\clearPaperPage}{\clearpage}

\SetKwInput{KwIn}{\textbf{输入}}
\SetKwInput{KwOut}{\textbf{输出}}
\SetKwInput{KwReturn}{\textbf{return}}


\usepackage{bm}                     % 处理数学公式中的黑斜体的宏包
\usepackage{amssymb}                % AMSLaTeX宏包 用来排出更加漂亮的公式
\usepackage{mathrsfs}
\usepackage[subnum]{cases}
\usepackage[super,square,comma,sort&compress]{natbib}
\usepackage{hypernat}
\usepackage{geometry}
\usepackage{times}
\usepackage{fontspec}
\usepackage{libertineotf}
\usepackage{caption}
\usepackage{titletoc}
\usepackage{mathtools}

\counterwithout{footnote}{chapter}

\usepackage{longtable,booktabs}
\usepackage{multirow}
\usepackage{tocloft}
\usepackage{subfig}

\usepackage{float}
\usepackage{balance}
\usepackage{paralist}
\usepackage{bbding}
\usepackage{pgffor}

\usepackage{threeparttable}
\usepackage{threeparttablex}

\makeindex
\pagestyle{fancy}

\renewcommand{\headrulewidth}{0.4pt}
\fancyfoot[CO,CE]{\thepage}

\renewcommand{\algorithmicrequire}{\textbf{Input:}}
\renewcommand{\algorithmicensure}{\textbf{Output:}}

\newcommand{\yihao}{\fontsize{26pt}{36pt}\selectfont}           % 一号, 1.4 倍行距
\newcommand{\erhao}{\fontsize{22pt}{28pt}\selectfont}          % 二号, 1.25 倍行距
\newcommand{\xiaoer}{\fontsize{18pt}{18pt}\selectfont}          % 小二, 单倍行距
\newcommand{\sanhao}{\fontsize{16pt}{24pt}\selectfont}        % 三号, 1.5 倍行距
\newcommand{\xiaosan}{\fontsize{15pt}{22pt}\selectfont}        % 小三, 1.5 倍行距
\newcommand{\sihao}{\fontsize{14pt}{21pt}\selectfont}            % 四号, 1.5 倍行距
\newcommand{\banxiaosi}{\fontsize{13pt}{19.5pt}\selectfont}    % 半小四, 1.5 倍行距
\newcommand{\xiaosi}{\fontsize{12pt}{18pt}\selectfont}            % 小四, 1.5 倍行距
\newcommand{\dawuhao}{\fontsize{11pt}{11pt}\selectfont}       % 大五号, 单倍行距
\newcommand{\wuhao}{\fontsize{10.5pt}{15.75pt}\selectfont}    % 五号, 单倍行距

\newcommand{\tablewuhao}{\fontsize{10.5pt}{12.5pt}\selectfont}    % 五号, 单倍行距

\newcommand{\equwuhao}{\fontsize{11pt}{13.5pt}\selectfont}


\renewcommand*{\bibfont}{\normalfont\normalsize\linespread{1}\selectfont}


%============================ 可以自定义文字块 ================================%
\newcommand\mytool{FakeRevealer}
\newcommand\componentA{应用收集器}
\newcommand\componentB{迭代搜索器}
\newcommand\componentC{应用过滤器}

%交叉引用格式
\renewcommand\figureautorefname{图}
\renewcommand\tableautorefname{表}
\renewcommand\equationautorefname{式}
\renewcommand{\algorithmautorefname}{算法}

\renewcommand{\contentsname}{\hfill\bfseries\Large {目~~~~录}\hfill}
\renewcommand{\cftaftertoctitle}{\hfill}

\renewcommand{\listtablename}{\hfill\bfseries\Large 表~~~~格\hfill}
\renewcommand{\listfigurename}{\hfill\bfseries\Large 插~~~~图\hfill}
\renewcommand{\listalgorithmcfname}{\centering\bfseries\Large 算~~~~法}

% 章引用
\newcommand*{\fullref}[1]{\textbf{\hyperref[{#1}]{第\ref*{#1}章}}}
% 节引用
\newcommand*{\secref}[1]{\textbf{\hyperref[{#1}]{第\ref*{#1}节}}}
% 概念定义
\newtheorem{Def}{定义}


%=============================段前段后定义=============================%
\def  \cftbeforetitleskip {25pt}
\def \cftaftertitleskip {25pt}

%% 目录部分
\setlength{\cftbeforetoctitleskip}{\cftbeforetitleskip}
\setlength{\cftaftertoctitleskip}{\cftaftertitleskip}

%% 图目录
\setlength{\cftbeforeloftitleskip}{\cftbeforetitleskip}
\setlength{\cftafterloftitleskip}{\cftaftertitleskip}

%% 表目录
\setlength{\cftbeforelottitleskip}{\cftbeforetitleskip}
\setlength{\cftafterlottitleskip}{\cftaftertitleskip}

%% 算法目录
% \setlength{\cftbeforeloatitleskip}{\cftbeforetitleskip}
% \setlength{\cftafterloatitleskip}{\cftaftertitleskip}

\CTEXsetup[beforeskip=\cftbeforetitleskip]{chapter}
\CTEXsetup[afterskip=\cftaftertitleskip]{chapter}

%===============================概念定义===============================%
\newcommand{\citeline}[1]{[\citenum{ #1 }]}

\newcommand{\important}[1]{\CJKunderdot{\textbf{#1}}}

\newcommand{\code}[1]{\textit{ #1 }}
\newcommand{\codeInEqu}[1]{ {  \textit{\kaishu \textbf{#1 }}}}

\newcommand{\point}[1]{\subsubsection{\textbf{$\S$  #1 }}}
\newcommand{\Line}[1]{ \textit{ Line .#1}}

% 匿名开关
\newcommand{\anonymous}[1]{\phantom{ #1 }}

% 基本信息
\newcommand{\TheisName}[0]{面向工业界仿冒应用的大规模实证研究}
\newcommand{\TheisNameEn}[0]{A Large-Scale Empirical Study on Industrial Fake Apps}

\def\yearOfGrduation{2020} % 毕业年份
\def\monthOfGraduationNum{5} % 毕业月份
\def\monthOfGraduationEng{May} % 毕业月份 (英文)
\def\articleCategory{华东师范大学硕士学位论文} % 论文类型

\def\schoolNameChn{计算机科学与技术学院}
\def\schoolNameEng{School of Computer Science and Technology}

\ifdefined \anonymous
  \def\stuID{***********}
  \def\cmajor{*****}
  \def\cfield{*********}
  \def\cadvisor{***~**}
  \def\cname{***}

  \def\emajor{*****}
  \def\efield{*****}
  \def\eadvisor{***}
  \def\ename{***}
\else
  \def\stuID{51174506026}
  \def\cmajor{计算机科学与技术}
  \def\cfield{软件方法与程序语言}
  \def\cadvisor{贺樑~教授}
  \def\cname{唐~崇~斌}

  \def\emajor{\small{Computer Science and Technology}}
  \def\efield{\small{Software Method and Programming Language}}
  \def\eadvisor{\small{Prof.~Liang~He}}
  \def\ename{\small{Chongbin~Tang}}
\fi

% 基本信息 ends


%============================= 版芯控制 ================================%
\setlength{\oddsidemargin}{0.57cm}
\setlength{\evensidemargin}{\oddsidemargin}
\voffset-6mm \textwidth=150mm \textheight=230mm \headwidth=150mm
%\rightmargin=35mm

%============================= 页面设置 ================================%
%-------------------- 定义页眉和页脚 使用fancyhdr 宏包 -----------------%
% 定义页眉与正文间双隔线
\newcommand{\makeheadrule}{%
\makebox[0pt][l]{\rule[.7\baselineskip]{\headwidth}{0.4pt}}%
\rule[0.85\baselineskip]{\headwidth}{0.4pt} \vskip-.8\baselineskip}
\makeatletter
\renewcommand{\headrule}{%
{\if@fancyplain\let\headrulewidth\plainheadrulewidth\fi
\makeheadrule}} \makeatother

\newcommand{\adots}{\mathinner{\mkern 2mu%
\raisebox{0.1em}{.}\mkern 2mu\raisebox{0.4em}{.}%
\mkern2mu\raisebox{0.7em}{.}\mkern 1mu}}

\setmainfont{Times New Roman}
\dottedcontents{chapter}[1.5cm]{\xiaosi\heiti}{3.8em}{9.5pt}
\lhead{\articleCategory}

\dottedcontents{section}[1.5cm]{\xiaosi\heiti}{2.8em}{9.5pt}
\lhead{\articleCategory}

%=============================== 代码格式定义 ================================%


%% 辅助功能显示页边界
%\usepackage{showframe} % just for the example

\usepackage{etoolbox}
\input{settings-lst}

\usepackage{bibspacing}
\setlength{\bibitemsep}{\baselineskip}
\renewcommand{\bibfont}{\normalfont}

\usepackage{lipsum}
% ADD THE FOLLOWING COUPLE LINES INTO YOUR PREAMBLE
\let\OLDthebibliography\thebibliography
\renewcommand\thebibliography[1]{
	\OLDthebibliography{#1}
	\setlength{\parskip}{0pt}
	\setlength{\itemsep}{0pt plus 0.3ex}
}

%=============================== 正文部分 ================================%

\begin{document}

\input{A1-COVER-1}
\clearPaperPage

\input{A2-COVER-E}
\clearPaperPage

% 原创性声明。匿名时不编译
\ifx\anonymous\undefined
    \input{A3-COPYRIGHT}
    \clearPaperPage
\fi

\input{A4-MEMBERLIST}
\clearPaperPage

\pagenumbering{roman}
\pagestyle{plain}

\input{B1-ABSTRACT}
\clearPaperPage

\input{B2-ABSTRACT-E}
\clearPaperPage

\input{B2-TOC}
\clearPaperPage

\input{B3-Figure}
\clearPaperPage

\input{B4-Table}
\input{B5-Algorithms}
\clearPaperPage

\pagenumbering{arabic}
\pagestyle{fancy}
\fancyhead[LE,RO]{\articleCategory}
\fancyhead[RE,LO]{ \leftmark}

\CTEXsetup[format+={\zihao{3}\heiti}]{chapter}
\CTEXsetup[format+={\raggedright\zihao{4}\heiti}]{section}
\CTEXsetup[format+={\zihao{-4}\heiti}]{subsection}

\setlength{\baselineskip}{25pt}  %%正文设为25磅行间距
\renewcommand{\addvspace}[1]{\origaddvspace{#1}} % 奇怪的section行间距。要放在这个位置
% 在章首页添加页眉

\fancypagestyle{plain}{%
\fancyhead[LE,RO]{\articleCategory}
\fancyhead[RE,LO]{ \leftmark}
}

\raggedbottom
\xiaosi
\clearPaperPage

\input{chapter-intro}
\clearPaperPage

\input{chapter-background}
\clearPaperPage

\input{chapter-fakerevealer}
\clearPaperPage

\input{chapter-discoveries}
\clearPaperPage

\input{chapter-feedback}
\clearPaperPage

\input{chapter-future}
\clearPaperPage

% 参考文献
\addcontentsline{toc}{chapter}{\small{参考文献}}
\bibliographystyle{GBT7714-2005}
\bibliography{bib/REFERENCE}
\clearPaperPage

% 致谢。匿名时不编译
\ifx\anonymous\undefined
	\fancypagestyle{plain}{%
		\fancyhead[LE,RO]{\small{\articleCategory}}
		\fancyhead[RE,LO]{\small{致  谢}}
	}
	\input{D2-ACKNOWLEDGEMENT}
	\clearPaperPage
\fi

\input{D3-MYACHIEVEMENTS}

\end{document}
